{"ast":null,"code":"var _this = this,\n  _jsxFileName = \"/home/cryptodev/Dev/aegis-burner/src/components/Bridge.js\";\nimport React, { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { createNocustManager } from '../services/nocustManager';\nimport { nocust } from 'nocust-client';\nimport i18n from '../i18n';\nimport Ruler from './Ruler';\nimport Balance from './Balance';\nimport SwapBar from './SwapBar';\nimport { useWithdrawalLimit } from '../contexts/Withdrawal';\nimport { useTokens } from '../contexts/Tokens';\nimport { useAddressBalance, useOnchainAddressBalance } from '../contexts/Balances';\nimport { useNocustClient } from '../contexts/Nocust';\nimport { useButtonStyle } from '../contexts/Theme';\nimport { safeAccess } from '../utils';\nexport default (function (props) {\n  /*\n  useEffect(() => {\n    (async () => {\n      await createNocustManager(process.env.REACT_APP_WEB3_PROVIDER, process.env.REACT_APP_HUB_CONTRACT_ADDRESS, process.env.REACT_APP_HUB_API_URL)\n    })();\n    \n    return () => {\n      // this now gets called when the component unmounts\n    };\n  }, []);\n  */\n\n  var buttonStyle = useButtonStyle();\n  //const nocust = useNocustClient()\n  var history = useHistory();\n  var tokens = useTokens();\n  console.log('tokens', tokens);\n  var eth = safeAccess(tokens, ['ETH']) || {};\n  console.log('eth', eth);\n  var token = safeAccess(tokens, [props.token]) || {};\n  console.log('token', token);\n  var balance = useAddressBalance(props.address, token.tokenAddress);\n  console.log('balance', balance);\n  var ethBalance = useOnchainAddressBalance(props.address, eth.tokenAddress);\n  console.log('ethBalance', ethBalance);\n  var withdrawLimit = useWithdrawalLimit(props.address, token.tokenAddress);\n  var gasLimit = '400000';\n  if (!balance || !balance.OnChainBalance || !balance.offchainBalance) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Balance, {\n    address: props.address,\n    token: token,\n    offchain: true,\n    selected: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Ruler, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Balance, {\n    address: props.address,\n    token: token,\n    selected: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Ruler, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }));\n});","map":{"version":3,"names":["React","useEffect","useHistory","createNocustManager","nocust","i18n","Ruler","Balance","SwapBar","useWithdrawalLimit","useTokens","useAddressBalance","useOnchainAddressBalance","useNocustClient","useButtonStyle","safeAccess","props","buttonStyle","history","tokens","console","log","eth","token","balance","address","tokenAddress","ethBalance","withdrawLimit","gasLimit","OnChainBalance","offchainBalance"],"sources":["/home/cryptodev/Dev/aegis-burner/src/components/Bridge.js"],"sourcesContent":["import React, { useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\n\nimport { createNocustManager } from '../services/nocustManager'\nimport { nocust } from 'nocust-client'\n\nimport i18n from '../i18n'\n\nimport Ruler from './Ruler'\nimport Balance from './Balance'\nimport SwapBar from './SwapBar'\n\nimport { useWithdrawalLimit } from '../contexts/Withdrawal'\nimport { useTokens } from '../contexts/Tokens'\nimport { useAddressBalance, useOnchainAddressBalance } from '../contexts/Balances'\nimport { useNocustClient } from '../contexts/Nocust'\nimport { useButtonStyle } from '../contexts/Theme'\n\nimport { safeAccess } from '../utils'\n\nexport default (props) => {\n  /*\n  useEffect(() => {\n    (async () => {\n      await createNocustManager(process.env.REACT_APP_WEB3_PROVIDER, process.env.REACT_APP_HUB_CONTRACT_ADDRESS, process.env.REACT_APP_HUB_API_URL)\n    })();\n    \n    return () => {\n      // this now gets called when the component unmounts\n    };\n  }, []);\n  */\n\n  const buttonStyle = useButtonStyle()\n  //const nocust = useNocustClient()\n  const history = useHistory()\n  const tokens = useTokens()\n  console.log('tokens', tokens)\n  const eth = safeAccess(tokens, ['ETH']) || {}\n  console.log('eth', eth)\n  const token = safeAccess(tokens, [props.token]) || {}\n  console.log('token', token)\n  const balance = useAddressBalance(props.address, token.tokenAddress)\n  console.log('balance', balance)\n  const ethBalance = useOnchainAddressBalance(props.address, eth.tokenAddress)\n  console.log('ethBalance', ethBalance)\n\n  const withdrawLimit = useWithdrawalLimit(props.address, token.tokenAddress)\n\n  const gasLimit = '400000'\n  \n  if (!balance || !balance.OnChainBalance || !balance.offchainBalance) {\n    return null\n  }\n\n  return (\n    <div>\n      <Balance\n        address={props.address}\n        token={token}\n        offchain\n        selected\n      />\n      <Ruler />\n{/*       <SwapBar\n        buttonStyle={buttonStyle}\n        changeAlert={props.changeAlert}\n        text={token ? token.shortName : i18n.t('loading')}\n        ethBalance={ethBalance}\n        OnChainBalance={balance.OnChainBalance}\n        offchainBalance={balance.offchainBalance}\n        withdrawLimit={withdrawLimit}\n        deposit={async (amount) => {\n          try {\n            //const txHash = await nocust.approveAndDeposit(props.address, amount, props.gasPrice, gasLimit, token.tokenAddress)\n            const txHash = await nocust.approveDeposits(props.address, amount, props.gasPrice, gasLimit, token.tokenAddress)\n            history.push('/liquidity/sending', { title: 'Sending ' + token.shortName + ' into the Liquidity Network...', subtitle: 'Tokens can take between 5-10 minutes to appear on the hub' })\n            props.onSend(txHash)\n          } catch (e) {\n            console.log(e)\n            props.changeAlert({ type: 'warning', message: 'Transaction Failed' })\n          }\n        }}\n        requestWithdraw={async (amount) => {\n          try {\n            const txHash = await nocust.withdraw(props.address, amount, props.gasPrice, gasLimit, token.tokenAddress)\n            history.push('/liquidity/sending', { title: 'Requesting to withdraw ' + token.shortName + ' from the Liquidity Network...', subtitle: 'Withdrawals can take up to 72 hours to become available to confirm onchain' })\n            props.onSend(txHash)\n          } catch (e) {\n            console.log(e)\n            props.changeAlert({ type: 'warning', message: 'Transaction Failed' })\n          }\n        }}\n      /> */}\n      <Balance\n        address={props.address}\n        token={token}\n        selected\n      />\n      <Ruler />\n    </div>\n  )\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,UAAU,QAAQ,kBAAkB;AAE7C,SAASC,mBAAmB,QAAQ,2BAA2B;AAC/D,SAASC,MAAM,QAAQ,eAAe;AAEtC,OAAOC,IAAI,MAAM,SAAS;AAE1B,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,OAAO,MAAM,WAAW;AAE/B,SAASC,kBAAkB,QAAQ,wBAAwB;AAC3D,SAASC,SAAS,QAAQ,oBAAoB;AAC9C,SAASC,iBAAiB,EAAEC,wBAAwB,QAAQ,sBAAsB;AAClF,SAASC,eAAe,QAAQ,oBAAoB;AACpD,SAASC,cAAc,QAAQ,mBAAmB;AAElD,SAASC,UAAU,QAAQ,UAAU;AAErC,gBAAe,UAACC,KAAK,EAAK;EACxB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEE,IAAMC,WAAW,GAAGH,cAAc,EAAE;EACpC;EACA,IAAMI,OAAO,GAAGhB,UAAU,EAAE;EAC5B,IAAMiB,MAAM,GAAGT,SAAS,EAAE;EAC1BU,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEF,MAAM,CAAC;EAC7B,IAAMG,GAAG,GAAGP,UAAU,CAACI,MAAM,EAAE,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC;EAC7CC,OAAO,CAACC,GAAG,CAAC,KAAK,EAAEC,GAAG,CAAC;EACvB,IAAMC,KAAK,GAAGR,UAAU,CAACI,MAAM,EAAE,CAACH,KAAK,CAACO,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC;EACrDH,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEE,KAAK,CAAC;EAC3B,IAAMC,OAAO,GAAGb,iBAAiB,CAACK,KAAK,CAACS,OAAO,EAAEF,KAAK,CAACG,YAAY,CAAC;EACpEN,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEG,OAAO,CAAC;EAC/B,IAAMG,UAAU,GAAGf,wBAAwB,CAACI,KAAK,CAACS,OAAO,EAAEH,GAAG,CAACI,YAAY,CAAC;EAC5EN,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEM,UAAU,CAAC;EAErC,IAAMC,aAAa,GAAGnB,kBAAkB,CAACO,KAAK,CAACS,OAAO,EAAEF,KAAK,CAACG,YAAY,CAAC;EAE3E,IAAMG,QAAQ,GAAG,QAAQ;EAEzB,IAAI,CAACL,OAAO,IAAI,CAACA,OAAO,CAACM,cAAc,IAAI,CAACN,OAAO,CAACO,eAAe,EAAE;IACnE,OAAO,IAAI;EACb;EAEA,oBACE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,OAAO;IACN,OAAO,EAAEf,KAAK,CAACS,OAAQ;IACvB,KAAK,EAAEF,KAAM;IACb,QAAQ;IACR,QAAQ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EACR,eACF,oBAAC,KAAK;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,eA+BT,oBAAC,OAAO;IACN,OAAO,EAAEP,KAAK,CAACS,OAAQ;IACvB,KAAK,EAAEF,KAAM;IACb,QAAQ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EACR,eACF,oBAAC,KAAK;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,CACL;AAEV,CAAC"},"metadata":{},"sourceType":"module"}